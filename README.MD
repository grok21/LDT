
# BackEnd
На данный момент на backend-е реализовано Web-API для соединения мобильного, десктопного и веб приложений, обработки и сохранения приходящих данных, процедуры для создания сессий и выкачивания необходимых данных из БД. В качестве СУБД используется PostgreSQL 12.  
  
База данных состоит из 4 таблиц:
* worker - таблица для описания рабочих
* manager - таблица для описания менеджеров
* object - таблица для описания объектов строительства
* workercontrol - таблица для фиксирования информации о происходящем
  
API включает в себя 3 основных маршрута:
* /api/worker - предназначен для работы с таблицей worker
* /api/manager - предназначен для работы с таблицей manager
* /api/object - предназначен для работы с таблицей object

### /api/worker: 
* post /register - регистрация пользователя, на выходе отдаёт jwt токен
* post /login - авторизация пользователя, на выходе отдаёт jwt токен
* post /logout - завершение сессии, обнуляет токен в БД
* get  /get-my-info - возвращает всю информацию о пользователе
* get  /get-iswork - возвращает статус смены, начата/нет
* post /update-iswork - позволяет обновить статус смены

### /api/manager: 
* post /register - регистрация пользователя, на выходе отдаёт jwt токен
* post /login - авторизация пользователя, на выходе отдаёт jwt токен
* post /logout - завершение сессии, обнуляет токен в БД
* get  /get-my-info - возвращает всю информацию о пользователе
* get  /get-active-workers - возвращает всех рабочих, которых начата смена
* post /update-iswork - позволяет обновить статус смены
 
### /api/object: 
* post /register - регистрация объекта
* get  / - возвращает список всех объектов

Часть маршрутов защищена с помощью jwt токена, при отправке запроса идёт проверка на соответствие токена данному пользователю и сравнение принятого и сохранённого токена. Пароли шифруются с помощью алгоритма argon2 и при авторизации сравниваются с помощью специальной функции. 

  
# Для запуска проекта необходимо: 
### Выкачать репозиторий и из папки BackEnd выполнить команды:
```
npm install
npm run start
```

